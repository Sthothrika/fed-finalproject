<div class="d-flex justify-content-between align-items-center mb-4">
  <div>
    <h1 class="mb-0">Admin Dashboard</h1>
  </div>
  <div>
    <a href="/admin/new" class="btn btn-success">Add Resource</a>
  </div>
</div>

<div class="row mb-4">
  <div class="col-md-3">
    <div class="card p-3 shadow-sm">
      <h6 class="mb-1">Total Views</h6>
      <div class="fw-bold display-6"><%= typeof totalViews !== 'undefined' ? totalViews : '—' %></div>
    </div>
  </div>
  <div class="col-md-3">
    <div class="card p-3 shadow-sm">
      <h6 class="mb-1">Resources</h6>
      <div class="fw-bold display-6"><%= typeof resourceCount !== 'undefined' ? resourceCount : '—' %></div>
    </div>
  </div>
  <div class="col-md-6 text-end">
    <a href="/admin/metrics" class="btn btn-outline-secondary">View Full Metrics</a>
  </div>
</div>

<table class="table table-striped table-hover shadow-sm">
  <thead>
    <tr>
      <th>Title</th>
      <th>Category</th>
      <th>Views</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <% (resources || []).forEach(function(r){ %>
      <tr>
        <td><%= r.title %></td>
        <td><%= r.category %></td>
        <td><%= r.views || 0 %></td>
        <td class="text-end">
          <a href="/admin/edit/<%= r.id %>" class="btn btn-sm btn-outline-primary me-2">Edit</a>
          <form action="/admin/delete/<%= r.id %>" method="post" style="display:inline-block" onsubmit="return confirm('Delete this resource?');">
            <button class="btn btn-sm btn-outline-danger">Delete</button>
          </form>
        </td>
      </tr>
    <% }) %>
  </tbody>
</table>

<div class="mt-4">
  <a href="/metrics" class="btn btn-outline-secondary">View Metrics (JSON)</a>
</div>
